<!doctype html>
<html class="no-js" lang="ja">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="robots" content="noindex">
    <title>検索 | 激辛歌会</title>
    <meta name="description" content="gson4bootgrid: Google spreadsheet to json converter designed for jquery.bootgrid">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#fafafa">
    <link rel="icon" href="/dist/favicon.ico" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" integrity="sha512-NhSC1YmyruXifcj/KFRWoC561YpHpc5Jtzgvbuzx5VozKpWvQ+4nXhPdFgmx8xqexRcpAglTj9sIBWINXa8x5w==" crossorigin="anonymous" />    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pretty-checkbox/3.0.0/pretty-checkbox.min.css" integrity="sha256-KCHcsGm2E36dSODOtMCcBadNAbEUW5m+1xLId7xgLmw=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fork-awesome/1.1.7/css/fork-awesome.min.css" integrity="sha512-9QjPqX/aCNwEQDyMqqMluNOSsHxTwOJNO3d4m5aUeNbyOPm8RcBA5hCUhvGmKFtSmQYGajqPopGtD60FWiWUwg==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha512-Dop/vW3iOtayerlYAqCgkVr2aTr2ErwwTYOvRFUpzl2VhCMJyjQF0Q9TjUXIo6JhuM/3i0vVEt2e/7QQmnHQqw==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-bootgrid/1.3.1/jquery.bootgrid.min.css" integrity="sha512-WBBdLBZSQGm9JN1Yut45Y9ijfFANbcOX3G+/A5+oO8W2ZWASp3NkPrG8mgr8QvGviyLoAz8y09l7SJ1dt0as7g==" crossorigin="anonymous" />
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-73417314-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-73417314-16');
    </script>
</head>

<body>

    <!--[if IE]>
      <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
    <![endif]-->

    <!-- Add your site or application content here -->
    <div id="app">
        <section class="container">
            <div class="row">
                <div class="col-lg-8 col-md-7 col-sm-12 col-md-offset-1">
                    <div class="page-header">
                        <form class="form-horizontal" @submit.stop>
                            <div class="form-group">
                                <div class="pretty p-switch p-slim">
                                    <input type="radio" name="switch" value="startsWith" v-model="mode" @change="refresh">
                                    <div class="state p-warning">
                                        <label>で始まる</label>
                                    </div>
                                </div>
                                <div class="pretty p-switch p-slim">
                                    <input type="radio" name="switch" value="endsWith" v-model="mode" @change="refresh">
                                    <div class="state p-warning">
                                        <label>で終わる</label>
                                    </div>
                                </div>
                                <div class="pretty p-switch p-slim">
                                    <input type="radio" name="switch" with="include" v-model="mode" @change="refresh">
                                    <div class="state p-warning">
                                        <label>を含む</label>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </section>
        <section class="container">
            <div class="row">
                <div class="col-lg-8 col-md-7 col-sm-12 col-md-offset-1">
                    <div class="page-header table-responsive">
                        <table id="grid" class="table table-condensed table-hover table-striped">
                            <thead>
                                <tr>
                                    <th data-column-id="id" data-type="numeric" data-order="asc" data-identifier="true">id</th>
                                    <th data-column-id="title">Title</th>
                                    <th data-column-id="taste">Taste</th>
                                    <th data-column-id="link" data-formatter="commands">Link</th>
                                </tr>
                            </thead>
                        </table>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js" integrity="sha512-3n19xznO0ubPpSwYCRRBgHh63DrV+bdZfHK52b1esvId4GsfwStQNPJFjeQos2h3JwCmZl0/LgLxSKMAI55hgw==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha512-oBTprMeNEKCnqfuqKd6sbvFzmFQtlXS3e0C/RGFV0hD6QzhHV+ODfaQbAlmY6/q0ubbwlAM/nCJjkrgA3waLzg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.11/vue.min.js" integrity="sha512-QJsj3afWlCpnQ60XzzYE8Jb3IgHIK1BcGZox9rUSmRRq3Ocz9vQ1yR80eX2/b9jfx/UuT5zYWNdrM8Te/eCMhQ==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-bootgrid/1.3.1/jquery.bootgrid.min.js" integrity="sha512-ut+jq2MDKjyWKK7rpEbyHjJ2kDBDO58DLFw4xJobqvS2kUgx4DJbj3OLjwk4F0pKtcxUoUIRS6esQVhh4fmWNA==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-bootgrid/1.3.1/jquery.bootgrid.fa.min.js" integrity="sha512-9n0UG6HszJFRxzkSCxUItSZeu48ecVvY95pRVu0GDhRspSavKvKcm04U96VYeNLPSb2lCDOZ5wXCDbowg1gHhg==" crossorigin="anonymous"></script>

    <script defer>
        // Avoid `console` errors in browsers that lack a console.
        (function () {
            var method;
            var noop = function () {};
            var methods = [
                "assert", "clear", "count", "debug", "dir", "dirxml", "error",
                "exception", "group", "groupCollapsed", "groupEnd", "info", "log",
                "markTimeline", "profile", "profileEnd", "table", "time", "timeEnd",
                "timeline", "timelineEnd", "timeStamp", "trace", "warn"
            ];
            var length = methods.length;
            var console = (window.console = window.console || {});
            while (length--) {
                method = methods[length];
                // Only stub undefined methods.
                if (!console[method]) {
                    console[method] = noop;
                }
            }
        }());
    </script>

    <script defer>
        const app = new Vue({
            el: "#app",
            data() {
                return {
                    mode: "startsWith",
                    url: "https://bit.ly/2KAaF2c"
                }
            },
            methods: {
                refresh() {
                    this.$nextTick(() => {
                        $("#grid").bootgrid("reload")
                    })
                }
            },
            mounted() {
                const self = this;
                this.$nextTick(() => {
                    $("#grid").bootgrid({
                        rowCount: [10, 25, 50, 100],
                        sorting: false,
                        ajax: true,
                        url: "/api/bootgrid",
                        formatters: {
                            commands: (column, row) => {
                                return `<a href="https://shinabitanori.at-ninja.jp/articles/${row.link}.html"><i class="fa fa-file-word-o" aria-hidden="true"></i></a>`
                            }
                        },
                        requestHandler: (request) => {
                            return {
                                url: self.$data.url,
                                current: request.current,
                                rowCount: request.rowCount,
                                searchMode: self.$data.mode,
                                searchPhrase: request.searchPhrase,
                            }
                        },
                        responseHandler: (response) => {
                            let rows = response.rows.map(x => {
                                return {
                                    id: x.id,
                                    title: x.title,
                                    taste: x.taste,
                                    link: x.slug
                                }
                            })
                            return {
                                current: response.current,
                                rowCount: response.rowCount,
                                rows: rows,
                                total: response.total
                            }
                        },
                        ajaxSettings: {
                            cache: true,
                            crossDomain: true
                        }
                    })
                })
            }
        })
    </script>

</body>
</html>